{
    "content": "### 11.2 拉格朗日乘數法 (Lagrange Multipliers) 求解：約束條件下的最優化\n在構建投資組合時，我們面臨著諸多硬性約束（如權重總合必須為 1）。**拉格朗日乘數法**是解決此類含約束最優化問題的解析黃金工具。它透過引入輔助參數 $\\lambda$，將有約束問題轉換為無約束方程組，從而獲取精確的權重解析解。\n\n#### 技術核心：拉格朗日函數構建\n假設目標是最小化方差 $\\frac{1}{2} \\mathbf{w}^T \\mathbf{\\Sigma} \\mathbf{w}$，且滿足權重之和等於 1 ($\\mathbf{w}^T \\mathbf{1} = 1$)，其構建如下：\n\n$$\n  \\mathcal{L}(\\mathbf{w}, \\lambda) = \\frac{1}{2} \\mathbf{w}^T \\mathbf{\\Sigma} \\mathbf{w} + \\lambda (1 - \\mathbf{w}^T \\mathbf{1})\n$$\n\n#### 專家決策矩陣：解析解 vs. 數值解的選型\n資深計量師需根據約束的複雜度決定求解路徑：\n\n| 求解方法 | 適用場景 | 核心優勢 |\n| :--- | :--- | :--- |\n| **解析解 (Lagrange)** | 僅含等式約束（如總權重=1，目標回報=k） | 運算極速，可直接推導出權重公式 |\n| **數值解 (QP)** | 包含不等式約束（如不可賣空 $w \\ge 0$，權重上限） | **工業標配**：能處理現實中絕大多數的投資限制 |\n| **隨機搜索 (Heuristic)**| 包含離散約束（如買入整數手、資產數量上限）| 適用於非連續、非凸的複雜優化表面 |\n\n> [!TIP]\n> 在 Python 資深實作中（見 `B2_Ch11_2.py`），對於不含不等式約束的全球最小變異數組合，我們直接套用矩陣公式 $\\mathbf{w} = \\frac{\\mathbf{\\Sigma}^{-1} \\mathbf{1}}{\\mathbf{1}^T \\mathbf{\\Sigma}^{-1} \\mathbf{1}}$。這比呼叫優化器更具效率且無數值收斂問題。\n\n#### 11.2 資深從業人員行動清單 (Action Items)\n執行公式求解前，必須落實：\n- **矩陣可逆性檢查**：確認 $\\mathbf{\\Sigma}$ 無奇異性，防止求逆運算失效。\n- **拉格朗日乘數物理含義審核**：監控 $\\lambda$ 的數值大小，它反映了邊際約束對風險降低的阻礙程度。\n- **約束完備性驗證**：確保所有法律與業務要求的等式約束已全部寫入拉格朗日算式，無一遺漏。"
}