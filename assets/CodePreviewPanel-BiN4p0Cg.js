import{r as a,j as e,G as f,b as w,P as N,X as E,h as L,v as S,c as z}from"./vendor-react-z0GRQXUU.js";import"./vendor-Duqdn4fa.js";function k({script:o,onClose:x,onRun:p,isRunning:d,darkMode:j,onResize:i}){const[t,l]=a.useState(!1),[u,m]=a.useState(!1),[c,h]=a.useState({show:!1,message:"",type:"info"}),v=(s,n="info")=>{h({show:!0,message:s,type:n}),setTimeout(()=>h({show:!1,message:"",type:"info"}),1e3)};if(!o)return null;const y=()=>{navigator.clipboard.writeText(o.code),m(!0),v("程式碼已複製到剪貼簿","success"),setTimeout(()=>m(!1),1e3)},b=s=>{l(!0),s.preventDefault()};return a.useEffect(()=>{const s=g=>{if(t&&i){const r=window.innerWidth-g.clientX;r>300&&r<window.innerWidth*.8&&i(r)}},n=()=>{l(!1)};return t?(document.addEventListener("mousemove",s),document.addEventListener("mouseup",n),document.body.style.cursor="col-resize",document.body.style.userSelect="none"):(document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",n),document.body.style.cursor="",document.body.style.userSelect=""),()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",n),document.body.style.cursor="",document.body.style.userSelect=""}},[t,i]),e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"resizer-overlay"}),e.jsx("div",{className:`resizer ${t?"dragging":""}`,onMouseDown:b,children:e.jsx("div",{className:"resizer-handle",children:e.jsx(f,{size:12})})}),e.jsx("div",{className:"code-preview-panel",children:e.jsx("div",{className:"preview-content",children:e.jsxs("div",{className:"code-section",children:[e.jsxs("div",{className:"code-header",children:[e.jsx("div",{className:"header-left",children:e.jsx("span",{children:"程式碼"})}),e.jsxs("div",{className:"header-right",children:[e.jsxs("button",{className:`btn ${u?"btn-success":"btn-secondary"} btn-sm`,onClick:y,title:"複製程式碼",children:[e.jsx(w,{size:16}),e.jsx("span",{children:u?"已複製":"複製"})]}),e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{v("開始執行程式...","success"),p(o.code)},disabled:d,children:[e.jsx(N,{size:16}),d?"執行中...":"執行"]}),e.jsx("div",{className:"divider-vertical"}),e.jsx("button",{className:"icon-btn close-btn",onClick:x,title:"關閉",children:e.jsx(E,{size:16})}),c.show&&e.jsx("div",{className:`local-toast toast-${c.type}`,children:c.message})]})]}),e.jsx("div",{className:"code-display",children:e.jsx(L,{language:"python",style:j?S:z,customStyle:{margin:0,padding:"1rem",fontSize:"0.85rem",lineHeight:"1.6",background:"transparent"},showLineNumbers:!0,children:o.code})})]})})})]})}export{k as default};
