import{r as a,j as e,G as g,b as N,P as E,X as S,h as k,v as z,c as C}from"./vendor-react-BScQi9YO.js";import"./vendor-B3CQIlJd.js";function M({script:o,onClose:x,onRun:j,isRunning:u,isLoading:r,darkMode:y,onResize:c}){const[t,m]=a.useState(!1),[h,v]=a.useState(!1),[i,p]=a.useState({show:!1,message:"",type:"info"}),d=(s,n="info")=>{p({show:!0,message:s,type:n}),setTimeout(()=>p({show:!1,message:"",type:"info"}),1e3)};if(!o)return null;const b=()=>{navigator.clipboard.writeText(o.code),v(!0),d("程式碼已複製到剪貼簿","success"),setTimeout(()=>v(!1),1e3)},f=s=>{m(!0),s.preventDefault()};return a.useEffect(()=>{const s=w=>{if(t&&c){const l=window.innerWidth-w.clientX;l>300&&l<window.innerWidth*.8&&c(l)}},n=()=>{m(!1)};return t?(document.addEventListener("mousemove",s),document.addEventListener("mouseup",n),document.body.style.cursor="col-resize",document.body.style.userSelect="none"):(document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",n),document.body.style.cursor="",document.body.style.userSelect=""),()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",n),document.body.style.cursor="",document.body.style.userSelect=""}},[t,c]),e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"resizer-overlay"}),e.jsx("div",{className:`resizer ${t?"dragging":""}`,onMouseDown:f,children:e.jsx("div",{className:"resizer-handle",children:e.jsx(g,{size:12})})}),e.jsx("div",{className:"code-preview-panel",children:e.jsx("div",{className:"preview-content",children:e.jsxs("div",{className:"code-section",children:[e.jsxs("div",{className:"code-header",children:[e.jsx("div",{className:"header-left",children:e.jsx("span",{children:"程式碼"})}),e.jsxs("div",{className:"header-right",children:[e.jsxs("button",{className:`btn ${h?"btn-success":"btn-secondary"} btn-sm`,onClick:b,title:"複製程式碼",children:[e.jsx(N,{size:16}),e.jsx("span",{children:h?"已複製":"複製"})]}),e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{if(r){d("請等待引擎初始化完成...","info");return}d("開始執行程式...","success"),j(o.code)},disabled:u||r,title:r?"核心引擎初始化中...":"執行程式碼",children:[e.jsx(E,{size:16}),u?"執行中...":r?"引擎啟動中":"執行"]}),e.jsx("div",{className:"divider-vertical"}),e.jsx("button",{className:"icon-btn close-btn",onClick:x,title:"關閉",children:e.jsx(S,{size:16})}),i.show&&e.jsx("div",{className:`local-toast toast-${i.type}`,children:i.message})]})]}),e.jsx("div",{className:"code-display",children:e.jsx(k,{language:"python",style:y?z:C,customStyle:{margin:0,padding:"1rem",fontSize:"0.85rem",lineHeight:"1.6",background:"transparent",whiteSpace:"pre-wrap",wordBreak:"break-word"},showLineNumbers:!0,children:o.code})})]})})})]})}export{M as default};
